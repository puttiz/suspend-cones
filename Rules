#!/usr/bin/env ruby

### Loading ##########################################################

require "compass"

Compass.add_project_configuration('config.rb')

# Compass.add_configuration "#{File.dirname(__FILE__)}/config.rb"
# sass_options = Compass.sass_engine_options

### Compilation rules ################################################

compile '*' do
  if item.binary?
    # donâ€™t filter binary items
  else
    filter :haml, :escape_attrs => false, :attr_wrapper => '"'
    layout item[:layout] ? item[:layout] : "default"
  end
end

### Routing rules ####################################################

route '*' do
  if item.binary?
    # Write item with identifier /foo/ to /foo.ext
    item.identifier.chop + '.' + item[:extension]
  else
    item.identifier.chop
  end
end

### Layout rules #####################################################

layout '*', :haml, :escape_attrs => false, :attr_wrapper => '"'
